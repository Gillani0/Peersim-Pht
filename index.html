<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Peersim-Pht by nongbottom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="web/stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="web/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="web/stylesheets/github-light.css" media="screen">

    <link href='https://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">
          Peersim-Pht
          <!--<h2 class="project-tagline">Prefix Hash Tree Implementation for PeerSim</h2>-->
          <a href="https://github.com/nongbottom/Peersim-pht">
              <!--View on GitHub-->
              <img src="web/GitHub-Logo2.png"
                   alt="Github logo"
                   style="height:42px;width:42px">
          </a>
      </h1>
        <a href="index.html" class="btn">Home</a>
        <a href="web/fr/rapport.html" class="btn">Report</a>
        <a href="web/doc/pht_doc.html" class="btn">Documentation</a>

        <br />
        <a href="https://github.com/nongbottom/Peersim-Pht" class="rapport">View project on github</a>
    </section>

    <section class="main-content">

        <div class="resume">
            <p>
                PeerSim-Pht is an implementation of the Prefix Hash Tree (Pht) distributed data
                structure into the peer to peer network simulator
                <a href="http://peersim.sourceforge.net">PeerSim</a>. You fill find in this
                website documentation and my report since it was a school project (in french for
                now). The documentation gives a quick overview on the Pht and how to use this
                implementation in PeerSim, and a longer description of the internal behaviour of
                the whole projects (with discussion about some choice made).
            </p>

            <p>
                Note: to work with the MSPastry implementation for PeerSim (available on
                PeerSim's web site), I had to make a little change (add a method) to make things
                work. I send an email to the maintainer, but I have no response. I can't say of I
                missed something or if it is a bug. Until I have an answer, please download the
                gzip archive with peersim and the modified pastry (or add a setmspastryid method
                in MSPastryProtocol).
            </p>

            <p><a href=".">Download Peersim, MSPastry and Pht</a></p>
            <p><a href=".">Download PeerSim-Pht source code</a></p>
        </div>

        <h3>Peersim-pht</h3>
        <p>Prefix Hash Tree Implementation for PeerSim as described in
            <a href="https://www.eecs.berkeley.edu/~sylvia/papers/pht.pdf">the original paper</a>
            .</p>

        <h3>Pht Operations</h3>
        <ol>
            <li>Linear lookup
                <p>a top-down traversal of the prefix tree (trie) which returns the the unique leaf
                    node whose label is a prefix of the given key.</p>
            </li>

            <li>Binary lookup (not implemented due to problems with mspastry)
                <p>Try different prefix lengths until the required leaf is reached.</p>
            </li>

            <li>Insertion of a key with related split operation.</li>
            <li>Deletion of a key with the related merge operation.</li>
            <li>Sequential range query: return all keys in a range using the links between the
                leaves.</li>
            <li>Parallel range query: return all keys in a range starting from the smallest common
                prefix node of the trie.</li>
        </ol>

        <h3>PeerSim integration</h3>

        <p>This Pht implementation can be used with any Distributed hash table as long as an
            interface is provided to enable communication between the concrete implementation of the
            Dht and Pht.</p>

        <h3>Interface with MSPastry</h3>

        <p>PeerSim has additional packages, one of them being the MSPastry protocol.
            We provide some classes in the peersim.dht package to run simulations with this Dht.</p>
        <p>
            It seems that the mspastry implementation on PeerSim's website has some routing problems. For example, if every
            node of the network sends a message with the same recipient, you might find that there has been more than one
            destination node. Since mspastry does not support data replication and works with a static network, this should
            not happen and has some consequences on what can be done or not. This is why binary search has not been
            implemented.
        </p>

        <h3>PeerSim configuration file</h3>

        <p>You will find five different parameters for the PhtProtocol in the configuration file:</p>

        <ol>
            <li>Key size (bits).</li>
            <li>Maximum amount of keys a leaf can have.</li>
            <li>Dht interface.</li>
            <li>Logs enabled. Possible values: "on" or anything else to disable this.</li>
            <li>Type of range query for the simulation ("seq" for sequential, everything else for
                parallel).</li>
            <li>Maximum delay (each message is virtually sent with a (very) pseudo-random delay)</li>
            <li>Retry factor (when a message has been stopped, retry the same operation with a Maximum delay * retry factor
                time)</li>
            <li>Route fail: continue or stop when a routing error has been detected (true: stop)</li>
        </ol>

        <h3>Project status</h3>

        <p>
            Every operation works (except binary search). This first version has one restrictions though: it only works
            with a static network.
        </p>
        <p>
            Note that this restriction depends on the underlying Dht: data must be replicated to work with a dynamic
            network. This means that if the Dht implementation does not provide replication, we can not build, test, run a
            simulation in a dynamic context.
        </p>

        <h3>Tests</h3>

        <p>
            Tests are provided to verify the properties of the Pht:
        </p>
        <ol>
            <li>A leaf is a prefix of every of its keys.</li>
            <li>Links between leaves must be valid.</li>
            <li>An  internal node has no keys.</li>
            <li>An internal node must know the number of keys of it sub-tree.</li>
            <li>Every key inserted (and not deleted) is in the Pht.</li>
        </ol>

        <h3>Statistics</h3>

        <p>
            Information are gathered during the simulation:
        </p>
        <ul>
            <li>Number of keys in the Pht</li>
            <li>Number of nodes in the Pht</li>
            <li>Number of leaves</li>
            <li>Number of leaves with more than B keys</li>
            <li>Pht height</li>
            <li>Minimum height</li>
            <li>Ten most used nodes</li>
            <li>Ten least used nodes</li>
            <li>Ten most loaded leaves</li>
            <li>Ten least loaded leaves</li>
            <li>Number of insertion, delete, query, range query operations</li>
        </ul>

        <p>
            The statistics part works with stages. This means that all counters are reset when a new phase starts.
            This can be helpful to have an idea of the impact of one particular operation for example.
        </p>

        <h3>Compile and run</h3>

        <p>
            As PeerSim, this Pht implementation makes use of a Makefile. To compile, simply type <span class="code">
            make</span>. To run the simulation with the default configuration file, type <span class="code">make
            run</span>. To clean the .class files, type <span class="code">make clean</span>. To build the javadoc,
            type <span class="code">make doc</span>.
        </p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/nongbottom/Peersim-pht">Peersim-pht</a> is maintained by <a href="https://github.com/nongbottom">nongbottom</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

